# 파일 및 파일 시스템

## 1. 시스템 호출과 파일 개요
- **시스템 호출**은 커널에 서비스를 요청하기 위한 프로그래밍 인터페이스.
- 주요 파일 관련 호출: `open()`, `close()`, `read()`, `write()`, `dup()`, `lseek()`, `creat()`
- **파일 디스크립터**: 열려있는 파일을 식별하는 정수 값
- 파일은 바이트 연속 구조이며 포맷이 정의되지 않음

---

## 2. 파일 입출력 구현

### 주요 구조체
- **파일 디스크립터 배열(Fd Array)**: 각 프로세스마다 존재, 열린 파일 테이블을 가리킴
- **열린 파일 테이블(Open File Table)**: 열린 모든 파일 상태 저장
- **동적 i-노드 테이블**: 열려 있는 파일의 i-node 정보를 유지

### lseek()
- 파일 포인터 이동
- `SEEK_SET`, `SEEK_CUR`, `SEEK_END` 기준으로 임의 위치 이동 가능

---

## 3. 파일 시스템 구조

### 구성 요소
- **부트 블록**: 시스템 부팅 시 필요한 코드
- **슈퍼 블록**: 파일 시스템 전체 정보 (블록 수, i-node 수 등)
- **i-리스트**: 파일을 나타내는 i-노드들의 목록
- **데이터 블록**: 실제 파일 내용 저장

### i-노드
- 파일의 메타데이터 저장 (타입, 소유자, 권한, 블록 포인터 등)
- 직접, 간접, 이중 간접 블록 포인터 포함

---

## 4. 파일 정보 확인

### stat 구조체
- 파일 타입, 크기, UID/GID, 링크 수, 접근/수정 시간 등 포함
- `stat()`, `fstat()`, `lstat()` 호출로 정보 수집

### 타입 검사 매크로
- `S_ISREG()`, `S_ISDIR()`, `S_ISCHR()` 등

---

## 5. 권한 및 소유자 변경

### chmod(), fchmod()
- 파일 접근 권한 설정: `rwx` 권한, 9비트 구성
- 사용자/그룹/기타로 분리

### chown(), lchown()
- 파일의 소유자 및 그룹 변경

---

## 6. 디렉터리 조작

### 디렉터리 관련 함수
- `opendir()`, `readdir()`, `closedir()` – 디렉터리 열기/읽기/닫기
- `mkdir()`, `rmdir()` – 디렉터리 생성 및 삭제

### 디렉터리 구현
- 디렉터리도 파일이며 i-node를 가짐
- 내용은 (파일 이름, i-node 번호) 쌍으로 구성된 엔트리 집합

---

## 7. 링크 (Link)

### 하드 링크 vs 심볼릭 링크
- **하드 링크**: 동일 i-node 공유, 같은 파일 시스템 내에서만 가능
- **심볼릭 링크**: 경로를 참조, 다른 파일 시스템에서도 가능

### 관련 시스템 호출
- `link()`, `unlink()`, `symlink()`, `readlink()`

---

## 8. 예제 요약
- `fsize.c`, `copy.c`: 파일 읽기/쓰기, 복사
- `list1.c`, `list2.c`: 디렉터리 내용 출력
- `dbcreate.c`, `dbquery.c`, `dbupdate.c`: 구조체 기반 학생 정보 관리

---

이 README는 시스템 프로그래밍 수업에서 다룬 파일 입출력, 디스크 구조, 디렉터리 처리 및 링크 개념까지 포괄적으로 요약한 문서입니다.
